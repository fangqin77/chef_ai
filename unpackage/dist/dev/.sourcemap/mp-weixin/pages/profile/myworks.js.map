{"version":3,"sources":["uni-app:///main.js","webpack:///C:/myprojects/chef_ai/pages/profile/myworks.vue?93e3","webpack:///C:/myprojects/chef_ai/pages/profile/myworks.vue?aaf9","webpack:///C:/myprojects/chef_ai/pages/profile/myworks.vue?5763","webpack:///C:/myprojects/chef_ai/pages/profile/myworks.vue?851a","uni-app:///pages/profile/myworks.vue","webpack:///C:/myprojects/chef_ai/pages/profile/myworks.vue?6c64","webpack:///C:/myprojects/chef_ai/pages/profile/myworks.vue?5e42"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","posts","fallbackImg","onShow","methods","loadPosts","arr","p","name","text","persist","_editForm","rest","uni","goPublish","url","editPost","cancelEdit","saveEdit","title","icon","deletePost","content","success","formatNow"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;AACa;;;AAGnE;AAC6L;AAC7L,gBAAgB,uMAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAAsuB,CAAgB,mvBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC8C1vB;EACAC;IACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;QACA;QACA;QACA;QACAC;UACA;YACA;YACAC;UACA;UACA;UACA;YACAC;YACAC;UACA;QACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACA;UAAAC;UAAAC;QACA;QACA;MACA;MACAC;IACA;IACAC;MACAD;QAAAE;MAAA;IACA;IACAC;MACA;MACA;MACA;QACAR;QACAC;MACA;IACA;IACAQ;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;QACAL;UAAAM;UAAAC;QAAA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAP;QAAAM;QAAAC;MAAA;IACA;IACAC;MAAA;MACA;MACAR;QACAM;QACAG;QACAC;UACA;YACA;cAAA;YAAA;YACA;YACA;YACAV;cAAAM;cAAAC;YAAA;UACA;QACA;MACA;IACA;IACAI;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC5IA;AAAA;AAAA;AAAA;AAA6iC,CAAgB,4hCAAG,EAAC,C;;;;;;;;;;;ACAjkC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/profile/myworks.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/profile/myworks.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./myworks.vue?vue&type=template&id=39b610f2&\"\nvar renderjs\nimport script from \"./myworks.vue?vue&type=script&lang=js&\"\nexport * from \"./myworks.vue?vue&type=script&lang=js&\"\nimport style0 from \"./myworks.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/profile/myworks.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./myworks.vue?vue&type=template&id=39b610f2&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.posts.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./myworks.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./myworks.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"page\">\r\n    <view v-if=\"!posts.length\" class=\"empty\">\r\n      <text class=\"tip\">还没有发布作品</text>\r\n      <button class=\"btn primary small\" @click=\"goPublish\">去发布</button>\r\n    </view>\r\n\r\n    <scroll-view v-else scroll-y class=\"list\">\r\n      <view class=\"card\" v-for=\"p in posts\" :key=\"p.id\">\r\n        <view class=\"top\">\r\n          <image class=\"cover\" :src=\"(p.images && p.images[0]) || fallbackImg\" mode=\"aspectFill\" />\r\n          <view class=\"meta\">\r\n            <text class=\"name\">{{ p.name || p.text || '' }}</text>\r\n            <text class=\"time\">{{ p.time || '刚刚' }}</text>\r\n          </view>\r\n          <view class=\"ops\">\r\n            <button class=\"btn tiny ghost\" @click=\"editPost(p)\" v-if=\"!p._editing\">编辑</button>\r\n            <button class=\"btn tiny danger\" @click=\"deletePost(p)\">删除</button>\r\n          </view>\r\n        </view>\r\n\r\n        <!-- 非编辑态：展示正文 -->\r\n        <view class=\"content\" v-if=\"!p._editing\">{{ p.text }}</view>\r\n\r\n        <!-- 编辑态：就地编辑标题与文案 -->\r\n        <view class=\"edit-panel\" v-else>\r\n          <view class=\"row\">\r\n            <text class=\"label\">标题</text>\r\n            <input class=\"input\" v-model=\"p._editForm.name\" placeholder=\"请输入标题（选填）\" />\r\n          </view>\r\n          <view class=\"row\">\r\n            <text class=\"label\">文案</text>\r\n            <textarea class=\"textarea\" v-model=\"p._editForm.text\" placeholder=\"编辑你的文案\" maxlength=\"200\" />\r\n          </view>\r\n          <view class=\"edit-ops\">\r\n            <button class=\"btn tiny primary\" @click=\"saveEdit(p)\">保存</button>\r\n            <button class=\"btn tiny ghost\" @click=\"cancelEdit(p)\">取消</button>\r\n          </view>\r\n          <text class=\"hint\">文字限制 200 字</text>\r\n        </view>\r\n      </view>\r\n    </scroll-view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      posts: [],\r\n      fallbackImg: '/static/yuan_97e57f821c79b841651df5b413309328.jpg'\r\n    }\r\n  },\r\n  onShow() {\r\n    this.loadPosts()\r\n  },\r\n  methods: {\r\n    loadPosts() {\r\n      try {\r\n        const local = uni.getStorageSync('social_posts') || []\r\n        const arr = Array.isArray(local) ? local : []\r\n        // 预设编辑态属性，保证响应式\r\n        arr.forEach(p => {\r\n          if (typeof p.id === 'undefined' || p.id === null) {\r\n            // 补一个 id（时间戳），避免后续编辑/删除失败\r\n            p.id = Date.now() + Math.random().toString(36).slice(2,7)\r\n          }\r\n          this.$set(p, '_editing', false)\r\n          this.$set(p, '_editForm', {\r\n            name: p.name || '',\r\n            text: p.text || ''\r\n          })\r\n        })\r\n        this.posts = arr\r\n      } catch(e) {\r\n        this.posts = []\r\n      }\r\n    },\r\n    persist() {\r\n      // 去除内部编辑态字段后保存\r\n      const clean = this.posts.map(p => {\r\n        const { _editing, _editForm, ...rest } = p\r\n        // 以编辑态表单为准（但只有保存时才写入）\r\n        return rest\r\n      })\r\n      uni.setStorageSync('social_posts', clean)\r\n    },\r\n    goPublish() {\r\n      uni.navigateTo({ url: '/pages/social/publish' })\r\n    },\r\n    editPost(p) {\r\n      // 开启编辑态，表单预填\r\n      this.$set(p, '_editing', true)\r\n      this.$set(p, '_editForm', {\r\n        name: p.name || '',\r\n        text: p.text || ''\r\n      })\r\n    },\r\n    cancelEdit(p) {\r\n      this.$set(p, '_editing', false)\r\n      // 取消不修改原数据\r\n    },\r\n    saveEdit(p) {\r\n      const form = p._editForm || {}\r\n      const name = String(form.name || '').trim()\r\n      const text = String(form.text || '').trim()\r\n      if (text.length > 200) {\r\n        uni.showToast({ title: '文案超出 200 字', icon: 'none' })\r\n        return\r\n      }\r\n      // 更新原数据\r\n      this.$set(p, 'name', name)\r\n      this.$set(p, 'text', text)\r\n      // 更新时间戳（可选）\r\n      this.$set(p, 'time', this.formatNow())\r\n      // 退出编辑态并持久化\r\n      this.$set(p, '_editing', false)\r\n      this.persist()\r\n      uni.showToast({ title: '已保存', icon: 'none' })\r\n    },\r\n    deletePost(p) {\r\n      const id = String(p.id)\r\n      uni.showModal({\r\n        title: '删除作品',\r\n        content: '确定要删除该作品吗？删除后不可恢复',\r\n        success: (res) => {\r\n          if (res.confirm) {\r\n            const next = this.posts.filter(item => String(item.id) !== id)\r\n            this.posts = next\r\n            this.persist()\r\n            uni.showToast({ title: '已删除', icon: 'none' })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    formatNow() {\r\n      // 简易时间展示：刚刚\r\n      return '刚刚'\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.page { background: #f7f2e7; min-height: 100vh; }\r\n.list { max-height: calc(100vh - 0rpx); }\r\n.card { margin: 16rpx 24rpx; background: #fff; border-radius: 20rpx; box-shadow: 0 10rpx 24rpx rgba(0,0,0,0.06); padding: 16rpx; }\r\n.top { display: flex; gap: 12rpx; align-items: flex-start; }\r\n.cover { width: 160rpx; height: 120rpx; border-radius: 12rpx; background: #eee; }\r\n.meta { flex: 1; display: flex; flex-direction: column; justify-content: center; }\r\n.name { font-size: 28rpx; font-weight: 700; color: #1f2937; }\r\n.time { font-size: 22rpx; color: #9ca3af; margin-top: 6rpx; }\r\n.ops { display: flex; gap: 8rpx; }\r\n.content { margin-top: 10rpx; font-size: 26rpx; color: #374151; }\r\n\r\n/* 编辑态 */\r\n.edit-panel { margin-top: 12rpx; background: #f9fafb; border-radius: 12rpx; padding: 12rpx; }\r\n.row { display: flex; align-items: center; gap: 12rpx; padding: 6rpx 0; }\r\n.label { width: 120rpx; color: #374151; font-size: 26rpx; }\r\n.input { flex: 1; height: 64rpx; background: #fff; border-radius: 12rpx; padding: 0 16rpx; font-size: 26rpx; border: 1px solid #e5e7eb; }\r\n.textarea { min-height: 120rpx; background: #fff; border-radius: 12rpx; padding: 12rpx 16rpx; font-size: 26rpx; border: 1px solid #e5e7eb; }\r\n.edit-ops { margin-top: 8rpx; display: flex; gap: 10rpx; }\r\n.hint { margin-top: 6rpx; font-size: 22rpx; color: #9ca3af; }\r\n\r\n/* 按钮样式 */\r\n.btn { border-radius: 12rpx; font-size: 24rpx; }\r\n.btn.primary { background: linear-gradient(90deg,#FFE27A,#FFC107); color: #fff; }\r\n.btn.small { height: 64rpx; line-height: 64rpx; padding: 0 24rpx; }\r\n.btn.tiny { height: 52rpx; line-height: 52rpx; padding: 0 16rpx; }\r\n.btn.ghost { background: #f3f4f6; color: #374151; }\r\n.btn.danger { background: #ef4444; color: #fff; }\r\n.empty { padding: 60rpx 24rpx; display: flex; flex-direction: column; align-items: center; gap: 16rpx; }\r\n.tip { font-size: 26rpx; color: #6b7280; }\r\n</style>","import mod from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./myworks.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./myworks.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1761642868872\n      var cssReload = require(\"C:/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}