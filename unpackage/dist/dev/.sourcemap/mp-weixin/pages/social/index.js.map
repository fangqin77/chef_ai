{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/myprojects/chef_ai/pages/social/index.vue?8528","webpack:///C:/myprojects/chef_ai/pages/social/index.vue?a6cc","webpack:///C:/myprojects/chef_ai/pages/social/index.vue?23af","uni-app:///pages/social/index.vue","webpack:///C:/myprojects/chef_ai/pages/social/index.vue?7e17","webpack:///C:/myprojects/chef_ai/pages/social/index.vue?85cd"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","posts","commentsMap","inputMap","focusMap","loading","sendingComment","onShow","options","targetPostId","response","images","console","post","nickname","avatar","time","likes","commentCount","content","_menuOpen","_commenting","im","fm","setTimeout","uni","title","icon","onShareAppMessage","path","computed","anyMenuOpen","anyOverlayOpen","methods","onImageTap","urls","current","token","list","key","existingIndex","entry","postId","cover","next","indicator","loop","longPressActions","itemList","hasImages","gridCols","getImages","getImageUrl","onCreate","url","goToUserProfile","userId","userName","userAvatar","map","join","closeAllMenus","closeAllOverlays","closeOverlayFor","toggleMenu","displayTime","timestamp","getRelativeTime","startComment","endComment","toggleLike","id","p","saveToLikedPosts","likedPosts","name","collectedAt","favoritesList","removeFromLikedPosts","restoreLikedStatus","getComments","loadCommentsFromStorage","formatMethod","replace","trim","getCommentCount","focusComment","handleSendComment","pid","text","duration","method","header","success","cm","fail","scrollTop","targetPost","e","imageElement"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AAC6L;AAC7L,gBAAgB,uMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChEA;AAAA;AAAA;AAAA;AAAouB,CAAgB,ivBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACoGxvB;AACA;AAAA;AAAA;AAAA;AAAA,eAEA;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;EAEAC;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;;cAEA;cACAC;cACAC;cAAA;cAAA;cAAA,OAIA;YAAA;cAAAC;cAAA;;cAEA;gBACA;gBACA;kBACA;gBACA;kBACA;kBACA;oBAEA;oBACA;oBACA;;oBAEA;oBACA;;oBAEA;oBACA;;oBAEA;oBACA;;oBAEA;oBACA;oBACA;sBACA;wBACAC;sBACA;wBACAC;wBACAD;sBACA;oBACA;oBAEA,uCACAE;sBACAC;sBACAC;sBACAC;sBAAA;sBACAC;sBACAC;sBACAP;sBACAQ;sBACAC;sBACAC;oBAAA;kBAEA;;kBAEA;kBACA;gBACA;cACA;gBACAT;gBACA;cACA;;cAEA;cACAU;cACAC;cACA;gBACAD;gBACAC;cACA;cACA;cACA;;cAEA;cACA;;cAEA;cACA;gBACAX;gBACA;kBACAY;oBACA;kBACA;gBACA;cACA;cAAA;cAAA;YAAA;cAAA;cAAA;cAEAZ;cACAa;gBAAAC;gBAAAC;cAAA;cACA;YAAA;cAAA;cAEA;cAAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAEA;EAEAC;IACA;MACAF;MACAG;IACA;EACA;EACAC;IACAC;MACA;QAAA;MAAA;IACA;IACAC;MACA;QAAA;MAAA;IACA;EACA;EACAC;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBACAC,2BAEA;gBAAA;gBAEAC;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBACAzB;gBAAA;gBAAA;cAAA;gBAEAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAA;gBACA;cAAA;gBAGA;gBACA;kBACA0B,mDAEA;kBACAC,8CAEA;kBACAC;oBAAA;kBAAA;kBAEA;oBACA;oBACAF;oBACAA;oBACAA;kBACA;oBACA;oBACAG;sBACAF;sBACAG;sBACAhB;sBACAiB;sBACA3B;oBACA;oBACAsB;kBACA;;kBAEA;kBACAM;kBACAnB;kBAEAb;gBACA;kBACAA;gBACA;;gBAEA;gBACA;kBACAa;oBACAW;oBAAA;oBACAD;oBAAA;oBACAU;oBAAA;oBACAC;oBAAA;oBACAC;sBAAA;sBACAC;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;;MAEA;MACA;QACA;UACA;UACA;YACA;cACA;cACA;cACA;YACA;cAAA;YAAA;UACA;QACA;UACAvC;QACA;MACA;;MAEA;MACA;QACA;UAAA;QAAA;MACA;MAEA;IACA;IACA;IACAwC;MACA;;MAEA;MACA;QACA;QACA;MACA;;MAEA;MACA;QACA;QACA;MACA;;MAEA;MACA;QACA;QACAxC;QACA;MACA;;MAEA;MACA;QACA;MACA;;MAEA;MACA;QACA;MACA;;MAEA;MACA;QACA;MACA;;MAEA;MACAA;MACA;IACA;IACAyC;MACA5B;QAAA6B;MAAA;IACA;IAEA;IACAC;MACA;QACA3C;QACA;MACA;;MAEA;MACA;MACA;QACA4C;QAAA;QACAC;QACAC;MACA;MAEA9C;;MAEA;MACA,sCACA+C;QAAA;MAAA,GACAC;MAEAnC;QACA6B;MACA;IACA;IACAO;MAAA;MACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MAEA;MACA;;MAEA;MACA;QACA;MACA;;MAEA;MACA;;MAEA;MACA;QACAC;QACA;QACA;UACAA;QACA;MACA;QACA;QACA;UACAA;QACA;UACAtD;UACA;QACA;MACA;;MAEA;MACA;QACA;MACA;MAEA;IACA;IAEA;IACAuD;MACA;MACA;;MAEA;MACA;QACA;MACA;;MAEA;MACA;QACA;QACA;MACA;;MAEA;MACA;QACA;QACA;MACA;;MAEA;MACA;QACA;QACA;MACA;;MAEA;MACA;QACA;QACA;MACA;;MAEA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;;MAEA;MACA;;MAEA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACAC;gBAAA;gBAGAlC;gBAAA,IACAA;kBAAA;kBAAA;gBAAA;gBACAZ;kBAAAC;kBAAAC;gBAAA;gBAAA;cAAA;gBAAA,KAIA6C;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAA9D;gBACA;kBACA;kBACA;kBACA;kBACA;kBACAe;oBAAAC;oBAAAC;kBAAA;gBACA;kBACAF;oBAAAC;oBAAAC;kBAAA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAGA;cAAA;gBAAAjB;gBACA;kBACA;kBACA;kBACA;kBACA;kBACAe;oBAAAC;oBAAAC;kBAAA;gBACA;kBACAF;oBAAAC;oBAAAC;kBAAA;gBACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAf;gBACAa;kBAAAC;kBAAAC;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACA8C;MACA;QACA;;QAEA;QACA;QACAC;QACAjD;;QAEA;QACA;;QAEA;QACA;UACA8C;UACAI;UACA7D;UACAK;UACAR;UACAK;UACAC;UACAF;UACA6D;QACA;;QAEAC;QACApD;MAEA,iBACA;IACA;IAEA;IACAqD;MACA;QACA;QACA;QACA;QACArD;;QAEA;QACA;QACA;QACAA;MAEA,iBACA;IACA;IAEA;IACAsD;MAAA;MACA;QACA;QACA9E;UACA;YACA;YACA;cACA;YACA;UACA;QACA;MACA,iBACA;IACA;IACA+E;MAAA;MACA;MACA;;MAEA;MACA;QACA;QACA;UACA;QACA;;QAEA;QACA;UAAA;QAAA;QACA;UACA;QACA;QAEA;MACA;MAEA;IACA;IAEA;IACAC;MACA;QACA;QACA;UACA;QACA;UACA;QACA;MACA;QACArE;QACA;MACA;IACA;IAEA;IACAsE;MACA;MACA;MACA;MAAA,CACAC;MAAA,CACAC;IACA;IACAC;MACA;MACA;QAAA;MAAA;MACA;QACA;MACA;;MAEA;MACA;IACA;IACAC;MAAA;MACA;;MAEA;MACA;QACA;QACA;QACA;UACA;UACA;UACA;QACA;MACA;;MAEA;MACA;MACA;MACA;MACA;;MAEA;MACA;IACA;IACAC;MAAA;MACA3E;MACA;MACA;QACAA;QACA;MACA;MAEA;MACA;QACA;MACA;IACA;EAAA,2FACA4D;IAAA;IACA5D;IACA;IACA;MACAA;MACA;IACA;IAEA;IACA;MACA;IACA;EACA,oFACA4D;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACA5D;cACA4E;cACAC;cAAA,IAEAA;gBAAA;gBAAA;cAAA;cACAhE;gBAAAC;gBAAAC;cAAA;cAAA;YAAA;cAIA;cACAF;gBAAAC;gBAAAC;gBAAA+D;cAAA;;cAEA;cACArD;cAAA,IACAA;gBAAA;gBAAA;cAAA;cACAZ;gBAAAC;gBAAAC;cAAA;cAAA;YAAA;cAIA;cACAF;gBACA6B;gBACAqC;gBACAC;kBACA;kBACA;gBACA;gBACA5F;kBACAmB;gBACA;gBACA0E;kBACAjF;;kBAEA;kBACA;oBACA+D;oBACAc;oBACAzE;oBACAwC;oBACAzC;kBACA;kBAEA;kBACA;kBACAuB;kBACAwD;kBACA;kBACArE;;kBAEA;kBACA;;kBAEA;kBACA;;kBAEA;kBACA;kBACA;kBAEAA;oBAAAC;oBAAAC;kBAAA;gBACA;gBACAoE;kBACAnF;kBACA;kBACAa;oBAAAC;oBAAAC;kBAAA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA,oEACA6C;IACA;IACA;IACA/C;MACAzB;MACA6F;QAAA;UAAAnE;UAAAC;QAAA;MAAA;MACAoE;QAAA;UAAArE;UAAAC;QAAA;MAAA;IACA;EACA,0EACA;IACA;MACA;IACA;IACA;EACA,kFAGAe;IAAA;IACA;IAEA9B;;IAEA;IACA;MACA;MACA;MACAA;MACA;IACA;IAEA;MACAA;QAAA;MAAA;MACAa;QAAAC;QAAAC;MAAA;MACA;IACA;IAEAf;;IAEA;IACA;MACAY;QACA;QACA;QACA;QACA;QAEAC;UACAuE;UACAN;QACA;QAEA9E;;QAEA;QACA;QACA;UACA;UACAqF;UAEAzE;YACAyE;UACA;QACA;MACA;IACA;EACA,kFAGAC;IACAtF;;IAEA;IACA;;IAEA;IACA;MACA;MACAuF;IACA;;IAEA;IACA;MACA;IAAA;;IAGA;IACA;MACA;IAAA;EAEA;AAEA;AAAA,2B;;;;;;;;;;;;;AC14BA;AAAA;AAAA;AAAA;AAA2iC,CAAgB,0hCAAG,EAAC,C;;;;;;;;;;;ACA/jC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/social/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/social/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=03cabca9&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/social/index.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=03cabca9&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = !_vm.loading ? !_vm.loading && _vm.posts.length === 0 : null\n  var l2 =\n    !_vm.loading && !g0\n      ? _vm.__map(_vm.posts, function (p, __i0__) {\n          var $orig = _vm.__get_orig(p)\n          var m0 = _vm.hasImages(p)\n          var m1 = _vm.hasImages(p)\n          var m2 = m1 ? _vm.gridCols(p) : null\n          var l0 = m1\n            ? _vm.__map(_vm.getImages(p) || [], function (img, idx) {\n                var $orig = _vm.__get_orig(img)\n                var m3 = _vm.getImageUrl(img)\n                return {\n                  $orig: $orig,\n                  m3: m3,\n                }\n              })\n            : null\n          var m4 = _vm.hasImages(p)\n          var m5 = m4 ? _vm.displayTime(p) : null\n          var m6 = p._menuOpen ? _vm.getCommentCount(p.id) : null\n          var g1 = _vm.getComments(p.id).length\n          var l1 = g1 ? _vm.getComments(p.id) : null\n          return {\n            $orig: $orig,\n            m0: m0,\n            m1: m1,\n            m2: m2,\n            l0: l0,\n            m4: m4,\n            m5: m5,\n            m6: m6,\n            g1: g1,\n            l1: l1,\n          }\n        })\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event, p, idx) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        p = _temp2.p,\n        idx = _temp2.idx\n      var _temp, _temp2\n      return _vm.onImageTap(p, idx)\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l2: l2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"page\">\r\n\r\n    <!-- È°∂ÈÉ®Ê†è -->\r\n    <view class=\"header\">\r\n      <text class=\"title\">ÁæéÈ£üÂúà</text>\r\n      <text class=\"add\" @click=\"onCreate\">Ôºã</text>\r\n    </view>\r\n\r\n    <!-- Âä®ÊÄÅÂàóË°® -->\r\n    <view class=\"feed\">\r\n      <!-- Âä†ËΩΩÁä∂ÊÄÅ -->\r\n      <view class=\"loading-state\" v-if=\"loading\">\r\n        <view class=\"loading-spinner\"></view>\r\n        <text class=\"loading-text\">Âä†ËΩΩ‰∏≠...</text>\r\n      </view>\r\n      \r\n      <!-- Á©∫Áä∂ÊÄÅ -->\r\n      <view class=\"empty-state\" v-else-if=\"!loading && posts.length === 0\">\r\n        <image class=\"empty-icon\" src=\"/static/picture/profile.png\" mode=\"aspectFit\"></image>\r\n        <text class=\"empty-title\">ÊöÇÊó†Âä®ÊÄÅ</text>\r\n        <text class=\"empty-desc\">Âø´Êù•ÂèëÂ∏ÉÁ¨¨‰∏ÄÊù°ÁæéÈ£üÂàÜ‰∫´Âêß</text>\r\n        <button class=\"empty-btn\" @click=\"onCreate\">ÂèëÂ∏ÉÂä®ÊÄÅ</button>\r\n      </view>\r\n      \r\n      <!-- Â∏ñÂ≠êÂàóË°® -->\r\n      <view class=\"post\" :class=\"{ 'highlighted': p._highlighted }\" v-for=\"p in posts\" :key=\"p.id\" v-else>\r\n        <view class=\"post-top\">\r\n          <image class=\"avatar\" :src=\"p.avatar || '/static/picture/profile.png'\" mode=\"aspectFill\" @click=\"goToUserProfile(p)\" />\r\n          <view class=\"author\">\r\n            <text class=\"name\" @click=\"goToUserProfile(p)\">{{ p.nickname || 'ÁæéÈ£üËææ‰∫∫' }}</text>\r\n          </view>\r\n          <text class=\"more\" v-if=\"!hasImages(p)\" @click=\"toggleMenu(p)\">¬∑¬∑¬∑</text>\r\n        </view>\r\n\r\n        <view class=\"content\">\r\n          <text class=\"post-content\">{{ p.content }}</text>\r\n        </view>\r\n\r\n        <view v-if=\"hasImages(p)\" class=\"images\" :class=\"'cols-' + gridCols(p)\">\r\n          <image v-for=\"(img, idx) in (getImages(p) || [])\"\r\n                 :key=\"idx\"\r\n                 :src=\"getImageUrl(img)\"\r\n                 class=\"img\"\r\n                 mode=\"aspectFill\"\r\n                 @tap=\"onImageTap(p, idx)\"\r\n                 @error=\"onImageError\" />\r\n        </view>\r\n        <!-- ÂõæÁâá‰∏ãÊñπ‰∏ÄË°åÔºöÂ∑¶Êó∂Èó¥ÔºåÂè≥ÁúÅÁï•Âè∑ -->\r\n        <view v-if=\"hasImages(p)\" class=\"img-footer\">\r\n          <text class=\"time-badge\">{{ displayTime(p) }}</text>\r\n          <text class=\"menu-dot\" @click.stop=\"toggleMenu(p)\">¬∑¬∑¬∑</text>\r\n        </view>\r\n\r\n        <view class=\"menu-mask\" v-if=\"p._menuOpen\" @click=\"closeOverlayFor(p)\"></view>\r\n        <view class=\"actions-menu\" v-if=\"p._menuOpen\">\r\n          <view class=\"am-item\" @click=\"toggleLike(p)\">\r\n            <text :class=\"['heart', p.liked ? 'liked' : '']\">‚ù§</text>\r\n            <text>{{ p.liked ? 'ÂèñÊ∂àÊî∂Ëóè' : 'Êî∂Ëóè' }}Ôºà{{ p.likes }}Ôºâ</text>\r\n          </view>\r\n          <view class=\"am-item\" @click=\"focusComment(p)\">\r\n            <text>üí¨</text>\r\n            <text>ËØÑËÆ∫Ôºà{{ getCommentCount(p.id) }}Ôºâ</text>\r\n          </view>\r\n          <view class=\"am-item\" @click=\"share(p)\">\r\n            <text>üîó</text>\r\n            <text>ÂàÜ‰∫´</text>\r\n          </view>\r\n        </view>\r\n        <!-- ÈöêËóèÂ∫ïÈÉ®Êìç‰ΩúÊ†èÔºåÂè™‰øùÁïôÂú®ËèúÂçï‰∏≠ÊòæÁ§∫ -->\r\n\r\n        <!-- ËØÑËÆ∫Âå∫ -->\r\n        <view class=\"comments\">\r\n          <view class=\"c-list\" v-if=\"getComments(p.id).length\">\r\n            <view class=\"c-item\" v-for=\"(c,i) in getComments(p.id)\" :key=\"i\">\r\n              <text class=\"c-name\">{{ c.name }}Ôºö</text>\r\n              <text class=\"c-text\">{{ c.text }}</text>\r\n              <text class=\"c-time\">{{ c.time }}</text>\r\n            </view>\r\n          </view>\r\n          <!-- ËØÑËÆ∫ËæìÂÖ•Ê°Ü -->\r\n          <view class=\"c-input compact\" v-if=\"p._commenting\">\r\n            <input class=\"input compact\"\r\n                   :focus=\"focusMap[p.id]\"\r\n                   :placeholder=\"'ËØÑËÆ∫ @' + (p.nickname || 'ÁæéÈ£üËææ‰∫∫')\"\r\n                   v-model=\"inputMap[p.id]\"\r\n                   @confirm=\"submitComment(p)\"\r\n                   @blur=\"endComment(p)\" />\r\n            <button class=\"btn micro\" @tap=\"handleSendComment(p)\" @click=\"handleSendComment(p)\" style=\"z-index: 1000; position: relative;\">ÂèëÈÄÅ</button>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"page-mask\" v-if=\"anyOverlayOpen\" @click=\"closeAllOverlays\"></view>\r\n    <view style=\"height: 24rpx;\" />\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { getCommunityPosts, likePost, cancelLikePost, createComment, recordBrowsingHistory } from '@/api/recipes';\r\nimport { getUserInfoById } from '@/api/user';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      posts: [],\r\n      commentsMap: {},   // { [postId]: [{name,text,time}] }\r\n      inputMap: {},      // { [postId]: 'input text' }\r\n      focusMap: {},      // { [postId]: boolean }\r\n      loading: false,    // Âä†ËΩΩÁä∂ÊÄÅ\r\n      sendingComment: false // Èò≤Ê≠¢ÈáçÂ§çÂèëÈÄÅËØÑËÆ∫\r\n    }\r\n  },\r\n  \r\n  async onShow() {\r\n    this.loading = true;\r\n    \r\n    // Ëé∑ÂèñURLÂèÇÊï∞‰∏≠ÁöÑpostId\r\n    const options = getCurrentPages()[getCurrentPages().length - 1].options || {};\r\n    const targetPostId = options.postId || null;\r\n    \r\n    try {\r\n      // Ëé∑ÂèñÊâÄÊúâÁî®Êà∑ÁöÑÂ∏ñÂ≠êÔºà‰∏ç‰º†ÂÖ•Áî®Êà∑IDÂèÇÊï∞ÔºâÔºåÁ°Æ‰øùËé∑ÂèñÂÖ®ÈÉ®Â∏ñÂ≠ê\r\n      const response = await getCommunityPosts(1, 50); // Â¢ûÂä†Ëé∑ÂèñÊï∞Èáè\r\n      \r\n      if (response && response.list) {\r\n        // Â¶ÇÊûúÊé•Âè£ËøîÂõûÁöÑ list ‰∏∫Á©∫ÔºåÊòæÁ§∫ÊèêÁ§∫\r\n        if (response.list.length === 0) {\r\n          this.posts = [];\r\n        } else {\r\n          // Â§ÑÁêÜÂ∏ñÂ≠êÊï∞ÊçÆÔºåÁõ¥Êé•‰ΩøÁî®ÂêéÁ´ØËøîÂõûÁöÑÁî®Êà∑‰ø°ÊÅØ\r\n          this.posts = response.list.map((post) => {\r\n            \r\n            // Áõ¥Êé•‰ΩøÁî®ÂêéÁ´ØËøîÂõûÁöÑÁî®Êà∑‰ø°ÊÅØ\r\n            const nickname = post.user_nickname || 'ÁæéÈ£üËææ‰∫∫';\r\n            const avatar = post.user_avatar_url || '/static/picture/profile.png';\r\n            \r\n            // Â§ÑÁêÜÊó∂Èó¥ÊòæÁ§∫\r\n            const displayTime = this.getRelativeTime(new Date(post.updated_at || post.created_at).getTime());\r\n            \r\n            // Â§ÑÁêÜÁÇπËµûÊï∞\r\n            const likes = post.like_count || 0;\r\n            \r\n            // Â§ÑÁêÜËØÑËÆ∫Êï∞\r\n            const commentCount = post.comment_count || 0;\r\n            \r\n            // Â§ÑÁêÜÂõæÁâá\r\n            let images = [];\r\n            if (post.media_json) {\r\n              try {\r\n                images = JSON.parse(post.media_json);\r\n              } catch (e) {\r\n                console.error('Ëß£Êûê media_json Â§±Ë¥•:', e);\r\n                images = [];\r\n              }\r\n            }\r\n            \r\n            return {\r\n              ...post,\r\n              nickname: nickname,\r\n              avatar: avatar,\r\n              time: displayTime, // ÊòæÁ§∫Áõ∏ÂØπÊó∂Èó¥\r\n              likes: likes,\r\n              commentCount: commentCount,\r\n              images: images,\r\n              content: post.content || '',\r\n              _menuOpen: false,\r\n              _commenting: false\r\n            };\r\n          });\r\n          \r\n          // ÊÅ¢Â§çÊî∂ËóèÁä∂ÊÄÅ\r\n          this.restoreLikedStatus(this.posts);\r\n        }\r\n      } else {\r\n        console.error('Êé•Âè£ËøîÂõûÊï∞ÊçÆÊ†ºÂºèÈîôËØØ:', response);\r\n        this.posts = [];\r\n      }\r\n      \r\n      // ÂàùÂßãÂåñËØÑËÆ∫ÂíåÁÑ¶ÁÇπÁä∂ÊÄÅ\r\n      const im = {};\r\n      const fm = {};\r\n      this.posts.forEach(post => {\r\n        im[post.id] = '';\r\n        fm[post.id] = false;\r\n      });\r\n      this.inputMap = im;\r\n      this.focusMap = fm;\r\n      \r\n      // ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩËØÑËÆ∫Êï∞ÊçÆ\r\n      this.loadCommentsFromStorage();\r\n      \r\n        // Â¶ÇÊûú‰º†ÂÖ•‰∫ÜtargetPostIdÔºåËá™Âä®ÊªöÂä®Âà∞ÂØπÂ∫îÂ∏ñÂ≠ê\r\n        if (targetPostId) {\r\n          console.log('Ëé∑ÂèñÂà∞ÁõÆÊ†áÂ∏ñÂ≠êID:', targetPostId, 'ÂΩìÂâçÂ∏ñÂ≠êÊï∞Èáè:', this.posts.length);\r\n          this.$nextTick(() => {\r\n            setTimeout(() => {\r\n              this.scrollToPost(targetPostId);\r\n            }, 1000); // Â¢ûÂä†Âª∂ËøüÊó∂Èó¥ÔºåÁ°Æ‰øùÂ∏ñÂ≠êÂàóË°®ÂÆåÂÖ®Âä†ËΩΩ\r\n          });\r\n        }\r\n    } catch (error) {\r\n      console.error('Ëé∑ÂèñÊâÄÊúâÁî®Êà∑Â∏ñÂ≠êÂàóË°®Â§±Ë¥•:', error);\r\n      uni.showToast({ title: 'Ëé∑ÂèñÂ∏ñÂ≠êÂàóË°®Â§±Ë¥•', icon: 'none' });\r\n      this.posts = [];\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  },\r\n  \r\n  onShareAppMessage(res) {\r\n    return {\r\n      title: 'ÂàÜ‰∫´‰∏ÄÁØáÁæéÈ£üÂúà‰ΩúÂìÅ',\r\n      path: '/pages/social/index'\r\n    }\r\n  },\r\n  computed: {\r\n    anyMenuOpen() {\r\n      return (this.posts || []).some(p => p && p._menuOpen)\r\n    },\r\n    anyOverlayOpen() {\r\n      return (this.posts || []).some(p => p && (p._menuOpen || p._commenting))\r\n    }\r\n  },\r\n  methods: {\r\n    async onImageTap(p, idx) {\r\n      const urls = this.getImages(p)\r\n      const current = urls[idx] || ''\r\n      \r\n      // ÂÜôÂÖ•ÊµèËßàÂéÜÂè≤Âà∞ÂêéÁ´Ø\r\n      try {\r\n        const token = uni.getStorageSync('token')\r\n        if (token && p.id) {\r\n          // Ë∞ÉÁî®ÂêéÁ´ØAPIËÆ∞ÂΩïÊµèËßàÂéÜÂè≤\r\n          await recordBrowsingHistory(p.id)\r\n          console.log('ÊµèËßàÂéÜÂè≤Â∑≤ËÆ∞ÂΩïÂà∞ÂêéÁ´ØÔºåÂ∏ñÂ≠êID:', p.id)\r\n        } else {\r\n          console.log('Áî®Êà∑Êú™ÁôªÂΩïÔºåË∑≥ËøáÂêéÁ´ØÊµèËßàÂéÜÂè≤ËÆ∞ÂΩï')\r\n        }\r\n      } catch (error) {\r\n        console.error('ËÆ∞ÂΩïÊµèËßàÂéÜÂè≤Âà∞ÂêéÁ´ØÂ§±Ë¥•:', error)\r\n        // ÂøΩÁï•ÂêéÁ´ØÈîôËØØÔºåÁªßÁª≠Êú¨Âú∞ËÆ∞ÂΩï\r\n      }\r\n      \r\n      // ÂÜôÂÖ•Êú¨Âú∞ÊµèËßàÂéÜÂè≤\r\n      try {\r\n        const list = uni.getStorageSync('social_history') || []\r\n        \r\n        // ÁîüÊàêÂîØ‰∏ÄÁöÑkeyÔºåÈÅøÂÖçÈáçÂ§ç\r\n        const key = Date.now() + '_' + String(p.id || idx)\r\n        \r\n        // Ê£ÄÊü•ÊòØÂê¶Â∑≤Â≠òÂú®Áõ∏ÂêåÂ∏ñÂ≠êÁöÑËÆ∞ÂΩï\r\n        const existingIndex = list.findIndex(item => item.postId === String(p.id))\r\n        \r\n        if (existingIndex !== -1) {\r\n          // Â¶ÇÊûúÂ∑≤Â≠òÂú®ÔºåÊõ¥Êñ∞ËÆ∞ÂΩï\r\n          list[existingIndex].time = 'ÂàöÂàö'\r\n          list[existingIndex].cover = current || (urls[0] || '')\r\n          list[existingIndex].title = String(p.content || p.nickname || '‰ΩúÂìÅ').slice(0, 60)\r\n        } else {\r\n          // Â¶ÇÊûú‰∏çÂ≠òÂú®ÔºåÊ∑ªÂä†Êñ∞ËÆ∞ÂΩï\r\n          const entry = {\r\n            key: key,\r\n            postId: String(p.id || ''),\r\n            title: String(p.content || p.nickname || '‰ΩúÂìÅ').slice(0, 60),\r\n            cover: current || (urls[0] || ''),\r\n            time: 'ÂàöÂàö'\r\n          }\r\n          list.unshift(entry)\r\n        }\r\n        \r\n        // ÈôêÂà∂ÂéÜÂè≤ËÆ∞ÂΩïÊï∞ÈáèÔºåÊúÄÂ§ö‰øùÂ≠ò100Êù°\r\n        const next = list.slice(0, 100)\r\n        uni.setStorageSync('social_history', next)\r\n        \r\n        console.log('ÊµèËßàÂéÜÂè≤Â∑≤ËÆ∞ÂΩïÂà∞Êú¨Âú∞ÔºåÂ∏ñÂ≠êID:', p.id)\r\n      } catch (e) {\r\n        console.error('ËÆ∞ÂΩïÊú¨Âú∞ÊµèËßàÂéÜÂè≤Â§±Ë¥•:', e)\r\n      }\r\n      \r\n      // È¢ÑËßàÂõæÁâáÔºàÊîØÊåÅÁº©Êîæ„ÄÅÂèåÊåáÁº©Êîæ„ÄÅÈïøÊåâ‰øùÂ≠òÁ≠âÔºâ\r\n      if (urls.length) {\r\n        uni.previewImage({\r\n          current,          // ÂΩìÂâçÊòæÁ§∫ÁöÑÂõæÁâá\r\n          urls,             // ÈúÄË¶ÅÈ¢ÑËßàÁöÑÂõæÁâáÈìæÊé•ÂàóË°®\r\n          indicator: 'number', // ÊòæÁ§∫Êï∞Â≠óÊåáÁ§∫Âô®\r\n          loop: true,       // Âæ™ÁéØÈ¢ÑËßà\r\n          longPressActions: { // ÈïøÊåâËèúÂçï\r\n            itemList: ['ÂèëÈÄÅÁªôÊúãÂèã', '‰øùÂ≠òÂõæÁâá', 'Êî∂Ëóè']\r\n          }\r\n        })\r\n      }\r\n    },\r\n    hasImages(p) {\r\n      return !!(p && this.getImages(p).length > 0)\r\n    },\r\n    gridCols(p) {\r\n      const len = this.getImages(p).length\r\n      if (len <= 1) return 1\r\n      if (len === 2) return 2\r\n      return 3\r\n    },\r\n    // Ëé∑ÂèñÂõæÁâáÊï∞ÁªÑ\r\n    getImages(p) {\r\n      if (!p) return []\r\n      \r\n      // Â§ÑÁêÜ mediaJson Â≠óÊÆµ\r\n      if (p.mediaJson) {\r\n        try {\r\n          const media = JSON.parse(p.mediaJson)\r\n          if (Array.isArray(media)) {\r\n            return media.map(item => {\r\n              if (typeof item === 'string') return item\r\n              if (item && item.url) return item.url\r\n              return ''\r\n            }).filter(url => url)\r\n          }\r\n        } catch (e) {\r\n          console.error('Ëß£Êûê mediaJson Â§±Ë¥•:', e)\r\n        }\r\n      }\r\n      \r\n      // Â§ÑÁêÜ images Â≠óÊÆµ\r\n      if (Array.isArray(p.images)) {\r\n        return p.images.filter(url => url)\r\n      }\r\n      \r\n      return []\r\n    },\r\n    // Â§ÑÁêÜÂõæÁâáURL\r\n    getImageUrl(img) {\r\n      if (!img) return ''\r\n      \r\n      // Ê£ÄÊü•ÊòØÂê¶ÊòØÊúâÊïàÁöÑURL\r\n      if (img.startsWith('http://') || img.startsWith('https://')) {\r\n        // Â¶ÇÊûúÊòØÁΩëÁªúÂõæÁâáÔºåÁõ¥Êé•ËøîÂõû\r\n        return img\r\n      }\r\n      \r\n      // Â§ÑÁêÜÂæÆ‰ø°Â∞èÁ®ãÂ∫è‰∏¥Êó∂Êñá‰ª∂Ë∑ØÂæÑÔºàhttp://tmp/ ËΩ¨‰∏∫ wxfile://tmp/Ôºâ\r\n      if (img.startsWith('http://tmp/')) {\r\n        // Âú®ÂæÆ‰ø°Â∞èÁ®ãÂ∫è‰∏≠Ôºå‰∏¥Êó∂Êñá‰ª∂Ë∑ØÂæÑÂ∫îËØ•ÊòØ wxfile://tmp/\r\n        return img.replace('http://tmp/', 'wxfile://tmp/')\r\n      }\r\n      \r\n      // Â§ÑÁêÜÂºÄÂèëÊúçÂä°Âô®‰∏¥Êó∂Êñá‰ª∂Ë∑ØÂæÑ\r\n      if (img.startsWith('http://127.0.0.1')) {\r\n        // ÂºÄÂèëÊúçÂä°Âô®‰∏¥Êó∂Êñá‰ª∂ÂèØËÉΩ‰∏çÁ®≥ÂÆöÔºåËøîÂõûÂ§áÈÄâÂõæÁâá\r\n        console.warn('ÂºÄÂèëÊúçÂä°Âô®‰∏¥Êó∂Êñá‰ª∂Ôºå‰ΩøÁî®Â§áÈÄâÂõæÁâá:', img)\r\n        return '/static/picture/profile.png'\r\n      }\r\n      \r\n      // Â§ÑÁêÜwxfileÂçèËÆÆË∑ØÂæÑÔºàÂæÆ‰ø°Â∞èÁ®ãÂ∫è‰∏ìÁî®Ôºâ\r\n      if (img.startsWith('wxfile://')) {\r\n        return img\r\n      }\r\n      \r\n      // Â§ÑÁêÜdata URIÂõæÁâá\r\n      if (img.startsWith('data:image/')) {\r\n        return img\r\n      }\r\n      \r\n      // Â§ÑÁêÜÁõ∏ÂØπË∑ØÂæÑ\r\n      if (img.startsWith('/')) {\r\n        return img\r\n      }\r\n      \r\n      // ÂØπ‰∫éÂÖ∂‰ªñÊÉÖÂÜµÔºåÂ∞ùËØïÁõ¥Êé•ËøîÂõû\r\n      console.warn('Â§ÑÁêÜÂõæÁâáË∑ØÂæÑ:', img)\r\n      return img\r\n    },\r\n    onCreate() {\r\n      uni.navigateTo({ url: '/pages/social/publish' })\r\n    },\r\n    \r\n    // Ë∑≥ËΩ¨Âà∞Áî®Êà∑ÁÆÄ‰ªãÈ°µÈù¢\r\n    goToUserProfile(post) {\r\n      if (!post || !post.id) {\r\n        console.warn('Â∏ñÂ≠êÊï∞ÊçÆ‰∏çÂÆåÊï¥ÔºåÊó†Ê≥ïË∑≥ËΩ¨Âà∞Áî®Êà∑ÁÆÄ‰ªãÈ°µÈù¢');\r\n        return;\r\n      }\r\n      \r\n      // ÊûÑÂª∫Áî®Êà∑ÁÆÄ‰ªãÈ°µÈù¢ÁöÑÂèÇÊï∞\r\n      // Ê≥®ÊÑèÔºöËøôÈáåÂ∫îËØ•‰º†ÈÄíÁî®Êà∑IDÔºàuser_idÔºâÔºåËÄå‰∏çÊòØÂ∏ñÂ≠êIDÔºàidÔºâ\r\n      const params = {\r\n        userId: post.user_id || post.id, // ‰ºòÂÖà‰ΩøÁî®user_idÔºåÂ¶ÇÊûúÊ≤°ÊúâÂàô‰ΩøÁî®Â∏ñÂ≠êid\r\n        userName: post.nickname || post.name || 'ÁæéÈ£üËææ‰∫∫',\r\n        userAvatar: post.avatar || '/static/picture/profile.png'\r\n      };\r\n      \r\n      console.log('Ë∑≥ËΩ¨Âà∞Áî®Êà∑ÁÆÄ‰ªãÈ°µÈù¢ÔºåÂèÇÊï∞:', params);\r\n      \r\n      // ÁºñÁ†ÅÂèÇÊï∞\r\n      const queryString = Object.keys(params)\r\n        .map(key => `${key}=${encodeURIComponent(params[key])}`)\r\n        .join('&');\r\n      \r\n      uni.navigateTo({ \r\n        url: `/pages/profile/user-detail?${queryString}` \r\n      });\r\n    },\r\n    closeAllMenus() {\r\n      (this.posts || []).forEach(item => {\r\n        if (item && item._menuOpen) this.$set(item, '_menuOpen', false)\r\n      })\r\n    },\r\n    closeAllOverlays() {\r\n      (this.posts || []).forEach(item => {\r\n        if (!item) return\r\n        if (item._menuOpen) this.$set(item, '_menuOpen', false)\r\n        if (item._commenting) this.$set(item, '_commenting', false)\r\n        const id = String(item.id)\r\n        this.$set(this.focusMap, id, false)\r\n      })\r\n    },\r\n    closeOverlayFor(p) {\r\n      if (!p) return\r\n      // Âè™ÂÖ≥Èó≠ËèúÂçïÔºå‰∏çÂΩ±ÂìçËØÑËÆ∫Ê°Ü\r\n      this.$set(p, '_menuOpen', false)\r\n    },\r\n    toggleMenu(p) {\r\n      // ÂÖàÂÖ≥Èó≠ÂÖ∂‰ªñÂ∏ñÂ≠êÁöÑËèúÂçï‰∏éËØÑËÆ∫Ê°Ü\r\n      (this.posts || []).forEach(item => {\r\n        if (!item) return\r\n        if (item._menuOpen) this.$set(item, '_menuOpen', false)\r\n        if (item._commenting) this.$set(item, '_commenting', false)\r\n        const id = String(item.id)\r\n        this.$set(this.focusMap, id, false)\r\n      })\r\n      // ÂàáÊç¢ÂΩìÂâçÂ∏ñÂ≠êÁöÑÊìç‰ΩúËèúÂçïÔºà‰ΩøÁî® $set Á°Æ‰øùÂìçÂ∫îÂºèÔºâÔºåÂπ∂Êî∂Ëµ∑ÂΩìÂâçÂ∏ñÂ≠êÁöÑËØÑËÆ∫Ê°Ü\r\n      const next = !(p && p._menuOpen)\r\n      this.$set(p, '_menuOpen', next)\r\n      const pid = String(p.id)\r\n      this.$set(this.focusMap, pid, false)\r\n      this.$set(p, '_commenting', false)\r\n    },\r\n    // ËÆ°ÁÆóÁõ∏ÂØπÊó∂Èó¥\r\n    displayTime(p) {\r\n      const t = p && p.time\r\n      if (!t) return 'ÂàöÂàö'\r\n      \r\n      const s = String(t).trim().toLowerCase()\r\n      if (!s || s === 'null' || s === 'undefined') return 'ÂàöÂàö'\r\n      \r\n      // Â¶ÇÊûúÂ∑≤ÁªèÊòØÁõ∏ÂØπÊó∂Èó¥Ê†ºÂºèÔºàÂ¶ÇÔºö5ÂàÜÈíüÂâçÔºâÔºåÁõ¥Êé•ËøîÂõû\r\n      if (s.includes('Ââç') || s.includes('ÂàÜÈíü') || s.includes('Â∞èÊó∂') || s.includes('Â§©') || s.includes('Êúà') || s.includes('Âπ¥')) {\r\n        return t\r\n      }\r\n      \r\n      // Â¶ÇÊûúÊòØÊó∂Èó¥Êà≥Ê†ºÂºèÔºåËÆ°ÁÆóÁõ∏ÂØπÊó∂Èó¥\r\n      let timestamp = null\r\n      \r\n      // Â∞ùËØïËß£ÊûêÊó∂Èó¥Êà≥ÔºàÁßíÊàñÊØ´ÁßíÔºâ\r\n      if (/^\\d+$/.test(s)) {\r\n        timestamp = parseInt(s)\r\n        // Â¶ÇÊûúÊó∂Èó¥Êà≥ÊòØÁßíÁ∫ßÔºàÂ∞è‰∫éÂΩìÂâçÊó∂Èó¥Êà≥ÁöÑ10ÂÄçÔºâÔºåËΩ¨Êç¢‰∏∫ÊØ´Áßí\r\n        if (timestamp < 1000000000000) {\r\n          timestamp *= 1000\r\n        }\r\n      } else {\r\n        // Â∞ùËØïËß£ÊûêÊó•ÊúüÂ≠óÁ¨¶‰∏≤\r\n        try {\r\n          timestamp = new Date(s).getTime()\r\n        } catch (e) {\r\n          console.warn('Êó†Ê≥ïËß£ÊûêÊó∂Èó¥Ê†ºÂºè:', t)\r\n          return t\r\n        }\r\n      }\r\n      \r\n      // Â¶ÇÊûúËß£ÊûêÂ§±Ë¥•ÔºåËøîÂõûÂéüÂßãÊó∂Èó¥\r\n      if (!timestamp || isNaN(timestamp)) {\r\n        return t\r\n      }\r\n      \r\n      return this.getRelativeTime(timestamp)\r\n    },\r\n    \r\n    // Ëé∑ÂèñÁõ∏ÂØπÊó∂Èó¥ÔºàÂ¶ÇÔºö5ÂàÜÈíüÂâç„ÄÅ2Â∞èÊó∂ÂâçÔºâ\r\n    getRelativeTime(timestamp) {\r\n      const now = Date.now()\r\n      const diff = now - timestamp\r\n      \r\n      // Â∞è‰∫é1ÂàÜÈíü\r\n      if (diff < 60000) {\r\n        return 'ÂàöÂàö'\r\n      }\r\n      \r\n      // Â∞è‰∫é1Â∞èÊó∂\r\n      if (diff < 3600000) {\r\n        const minutes = Math.floor(diff / 60000)\r\n        return `${minutes}ÂàÜÈíüÂâç`\r\n      }\r\n      \r\n      // Â∞è‰∫é1Â§©\r\n      if (diff < 86400000) {\r\n        const hours = Math.floor(diff / 3600000)\r\n        return `${hours}Â∞èÊó∂Ââç`\r\n      }\r\n      \r\n      // Â∞è‰∫é1‰∏™Êúà\r\n      if (diff < 2592000000) {\r\n        const days = Math.floor(diff / 86400000)\r\n        return `${days}Â§©Ââç`\r\n      }\r\n      \r\n      // Â∞è‰∫é1Âπ¥\r\n      if (diff < 31536000000) {\r\n        const months = Math.floor(diff / 2592000000)\r\n        return `${months}‰∏™ÊúàÂâç`\r\n      }\r\n      \r\n      // Ë∂ÖËøá1Âπ¥\r\n      const years = Math.floor(diff / 31536000000)\r\n      return `${years}Âπ¥Ââç`\r\n    },\r\n    startComment(p) {\r\n      if (!p) return\r\n      this.$set(p, '_menuOpen', false)\r\n      this.$set(p, '_commenting', true)\r\n      const id = String(p.id)\r\n      this.$set(this.focusMap, id, true)\r\n    },\r\n    endComment(p) {\r\n      if (!p) return\r\n      const id = String(p.id)\r\n      const text = (this.inputMap[id] || '').trim()\r\n      \r\n      // Â§±ÁÑ¶Êó∂‰ªÖÂèñÊ∂àÁÑ¶ÁÇπÔºå‰∏çËá™Âä®Êî∂Ëµ∑ËØÑËÆ∫Ê°Ü\r\n      this.$set(this.focusMap, id, false)\r\n      \r\n      // Âè™ÊúâÂú®ËæìÂÖ•Ê°Ü‰∏∫Á©∫‰∏îÁî®Êà∑ÊòéÁ°ÆÁÇπÂáª‰∫ÜÂÖ∂‰ªñÂú∞ÊñπÊó∂ÊâçÊî∂Ëµ∑ËØÑËÆ∫Ê°Ü\r\n      // ËøôÈáå‰∏çËá™Âä®Êî∂Ëµ∑ÔºåËÆ©Áî®Êà∑ÈÄöËøáÁÇπÂáªÂÖ∂‰ªñÂú∞ÊñπÊàñÊòéÁ°ÆÊìç‰ΩúÊù•ÂÖ≥Èó≠\r\n    },\r\n    async toggleLike(p) {\r\n      if (p) p._menuOpen = false\r\n      const id = String(p.id)\r\n      \r\n      try {\r\n        const token = uni.getStorageSync('token')\r\n        if (!token) {\r\n          uni.showToast({ title: 'ËØ∑ÂÖàÁôªÂΩï', icon: 'none' })\r\n          return\r\n        }\r\n        \r\n        if (p.liked) {\r\n          // ÂèñÊ∂àÁÇπËµûÔºàÂèñÊ∂àÊî∂ËóèÔºâ\r\n          const response = await cancelLikePost(id)\r\n          if (response && response.success) {\r\n            this.$set(p, 'liked', false)\r\n            this.$set(p, 'likes', Math.max((p.likes || 0) - 1, 0))\r\n            // ‰ªéÊú¨Âú∞Â≠òÂÇ®‰∏≠ÁßªÈô§Êî∂ËóèÁä∂ÊÄÅÂíåÂ∏ñÂ≠ê‰ø°ÊÅØ\r\n            this.removeFromLikedPosts(id)\r\n            uni.showToast({ title: 'Â∑≤ÂèñÊ∂àÊî∂Ëóè', icon: 'none' })\r\n          } else {\r\n            uni.showToast({ title: response?.message || 'ÂèñÊ∂àÊî∂ËóèÂ§±Ë¥•', icon: 'none' })\r\n          }\r\n        } else {\r\n          // ÁÇπËµûÔºàÊî∂ËóèÔºâ\r\n          const response = await likePost(id)\r\n          if (response && response.success) {\r\n            this.$set(p, 'liked', true)\r\n            this.$set(p, 'likes', (p.likes || 0) + 1)\r\n            // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®\r\n            this.saveToLikedPosts(p)\r\n            uni.showToast({ title: 'Â∑≤Êî∂Ëóè', icon: 'none' })\r\n          } else {\r\n            uni.showToast({ title: response?.message || 'Êî∂ËóèÂ§±Ë¥•', icon: 'none' })\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('ÁÇπËµûÊìç‰ΩúÂ§±Ë¥•:', error)\r\n        uni.showToast({ title: 'Êìç‰ΩúÂ§±Ë¥•ÔºåËØ∑ÈáçËØï', icon: 'none' })\r\n      }\r\n    },\r\n    \r\n    // ‰øùÂ≠òÊî∂ËóèÁä∂ÊÄÅÂíåÂ∏ñÂ≠ê‰ø°ÊÅØÂà∞Êú¨Âú∞Â≠òÂÇ®\r\n    saveToLikedPosts(post) {\r\n      try {\r\n        const postId = String(post.id)\r\n        \r\n        // ‰øùÂ≠òÊî∂ËóèÁä∂ÊÄÅ\r\n        const likedPosts = uni.getStorageSync('liked_posts') || {}\r\n        likedPosts[postId] = true\r\n        uni.setStorageSync('liked_posts', likedPosts)\r\n        \r\n        // ‰øùÂ≠òÂ∏ñÂ≠ê‰ø°ÊÅØÂà∞Êî∂ËóèÂàóË°®\r\n        const favoritesList = uni.getStorageSync('favorites_list') || {}\r\n        \r\n        // ÊèêÂèñÈúÄË¶Å‰øùÂ≠òÁöÑÂ∏ñÂ≠ê‰ø°ÊÅØ\r\n        const favoritePost = {\r\n          id: postId,\r\n          name: post.nickname || post.userName || post.name || 'Áî®Êà∑',\r\n          nickname: post.nickname || post.userName || post.name || 'Áî®Êà∑',\r\n          content: post.content || '',\r\n          images: this.getImages(post),\r\n          time: post.time || 'ÂàöÂàö',\r\n          likes: post.likes || 0,\r\n          avatar: post.avatar || '/static/picture/profile.png',\r\n          collectedAt: new Date().toISOString() // Êî∂ËóèÊó∂Èó¥\r\n        }\r\n        \r\n        favoritesList[postId] = favoritePost\r\n        uni.setStorageSync('favorites_list', favoritesList)\r\n        \r\n      } catch (error) {\r\n      }\r\n    },\r\n    \r\n    // ‰ªéÊú¨Âú∞Â≠òÂÇ®‰∏≠ÁßªÈô§Êî∂ËóèÁä∂ÊÄÅÂíåÂ∏ñÂ≠ê‰ø°ÊÅØ\r\n    removeFromLikedPosts(postId) {\r\n      try {\r\n        // ÁßªÈô§Êî∂ËóèÁä∂ÊÄÅ\r\n        const likedPosts = uni.getStorageSync('liked_posts') || {}\r\n        delete likedPosts[postId]\r\n        uni.setStorageSync('liked_posts', likedPosts)\r\n        \r\n        // ÁßªÈô§Êî∂ËóèÂàóË°®‰∏≠ÁöÑÂ∏ñÂ≠ê‰ø°ÊÅØ\r\n        const favoritesList = uni.getStorageSync('favorites_list') || {}\r\n        delete favoritesList[postId]\r\n        uni.setStorageSync('favorites_list', favoritesList)\r\n        \r\n      } catch (error) {\r\n      }\r\n    },\r\n    \r\n    // ‰ªéÊú¨Âú∞Â≠òÂÇ®ÊÅ¢Â§çÊî∂ËóèÁä∂ÊÄÅ\r\n    restoreLikedStatus(posts) {\r\n      try {\r\n        const likedPosts = uni.getStorageSync('liked_posts') || {}\r\n        posts.forEach(post => {\r\n          if (post && post.id) {\r\n            const postId = String(post.id)\r\n            if (likedPosts[postId]) {\r\n              this.$set(post, 'liked', true)\r\n            }\r\n          }\r\n        })\r\n      } catch (error) {\r\n      }\r\n    },\r\n    getComments(pid) {\r\n      const cm = this.commentsMap || {}\r\n      const list = cm[String(pid)] || []\r\n      \r\n      // ËøáÊª§ËØÑËÆ∫ÔºöÂè™ÊòæÁ§∫‰ΩúËÄÖÂíåÂΩìÂâçÁî®Êà∑ÁöÑËØÑËÆ∫\r\n      const filteredList = list.filter(comment => {\r\n        // ÊòæÁ§∫ÂΩìÂâçÁî®Êà∑ÁöÑËØÑËÆ∫\r\n        if (comment.userId === 'current') {\r\n          return true\r\n        }\r\n        \r\n        // ÊòæÁ§∫Â∏ñÂ≠ê‰ΩúËÄÖÁöÑËØÑËÆ∫ÔºàÈúÄË¶Å‰ªéÂ∏ñÂ≠ê‰ø°ÊÅØ‰∏≠Ëé∑Âèñ‰ΩúËÄÖIDÔºâ\r\n        const post = this.posts.find(p => String(p.id) === String(pid))\r\n        if (post && comment.userId === String(post.userId)) {\r\n          return true\r\n        }\r\n        \r\n        return false\r\n      })\r\n      \r\n      return Array.isArray(filteredList) ? filteredList : []\r\n    },\r\n    \r\n    // ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩËØÑËÆ∫Êï∞ÊçÆ\r\n    loadCommentsFromStorage() {\r\n      try {\r\n        const savedComments = uni.getStorageSync('social_comments')\r\n        if (savedComments) {\r\n          this.commentsMap = savedComments\r\n          } else {\r\n          this.commentsMap = {}\r\n        }\r\n      } catch (error) {\r\n        console.error('Âä†ËΩΩËØÑËÆ∫Êï∞ÊçÆÂ§±Ë¥•:', error)\r\n        this.commentsMap = {}\r\n      }\r\n    },\r\n    \r\n    // Ê†ºÂºèÂåñÂà∂‰ΩúÊñπÊ≥ï\r\n    formatMethod(method) {\r\n      if (!method) return '';\r\n      // ÂéªÈô§Êç¢Ë°åÁ¨¶ÂíåÂ§ö‰ΩôÁ©∫Ê†ºÔºåÁî®Âè•Âè∑ÂàÜÈöîÊ≠•È™§\r\n      return method.replace(/\\r?\\n+/g, '„ÄÇ') // Êç¢Ë°åÊîπÊàêÂè•Âè∑\r\n               .replace(/\\s+/g, ' ')     // ÂéªÈô§Â§ö‰ΩôÁ©∫Ê†º\r\n               .trim();                  // ÂéªÈô§È¶ñÂ∞æÁ©∫Ê†º\r\n    },\r\n    getCommentCount(pid) {\r\n      // ‰ºòÂÖà‰ΩøÁî®ÂêéÁ´ØËøîÂõûÁöÑ comment_count Â≠óÊÆµ\r\n      const post = this.posts.find(p => String(p.id) === String(pid));\r\n      if (post && (post.commentCount || post.comment_count)) {\r\n        return post.commentCount || post.comment_count;\r\n      }\r\n      \r\n      // Â¶ÇÊûúÊ≤°ÊúâÂêéÁ´ØÂ≠óÊÆµÔºå‰ΩøÁî®Êú¨Âú∞ËØÑËÆ∫Êï∞Èáè\r\n      return this.getComments(pid).length\r\n    },\r\n    focusComment(p) {\r\n      if (!p) return\r\n      \r\n      // ÂÖàÂÖ≥Èó≠ÂÖ∂‰ªñÂ∏ñÂ≠êÁöÑËèúÂçï‰∏éËØÑËÆ∫Ê°Ü\r\n      (this.posts || []).forEach(item => {\r\n        if (!item) return\r\n        if (item._menuOpen) this.$set(item, '_menuOpen', false)\r\n        if (item._commenting && item.id !== p.id) {\r\n          this.$set(item, '_commenting', false)\r\n          const itemId = String(item.id)\r\n          this.$set(this.focusMap, itemId, false)\r\n        }\r\n      })\r\n      \r\n      // ÊâìÂºÄÂΩìÂâçÂ∏ñÂ≠êÁöÑËØÑËÆ∫Ê°Ü\r\n      this.$set(p, '_menuOpen', false)\r\n      this.$set(p, '_commenting', true)\r\n      const id = String(p.id)\r\n      this.$set(this.focusMap, id, true)\r\n      \r\n      // Á°Æ‰øùËæìÂÖ•Ê°Ü‰∏∫Á©∫\r\n      this.$set(this.inputMap, id, '')\r\n    },\r\n    handleSendComment(p) {\r\n      console.log('ÂèëÈÄÅÊåâÈíÆË¢´ÁÇπÂáªÔºåÂ∏ñÂ≠êID:', p.id)\r\n      // Èò≤Ê≠¢ÈáçÂ§çÁÇπÂáª\r\n      if (this.sendingComment) {\r\n        console.log('Ê≠£Âú®ÂèëÈÄÅËØÑËÆ∫ÔºåËØ∑Á®çÂÄô...')\r\n        return\r\n      }\r\n      \r\n      this.sendingComment = true\r\n      this.submitComment(p).finally(() => {\r\n        this.sendingComment = false\r\n      })\r\n    },\r\n    handleSendComment(p) {\r\n      console.log('ÂèëÈÄÅÊåâÈíÆË¢´ÁÇπÂáªÔºåÂ∏ñÂ≠êID:', p.id)\r\n      // Èò≤Ê≠¢ÈáçÂ§çÁÇπÂáª\r\n      if (this.sendingComment) {\r\n        console.log('Ê≠£Âú®ÂèëÈÄÅËØÑËÆ∫ÔºåËØ∑Á®çÂÄô...')\r\n        return\r\n      }\r\n      \r\n      this.sendingComment = true\r\n      this.submitComment(p).finally(() => {\r\n        this.sendingComment = false\r\n      })\r\n    },\r\n    async submitComment(p) {\r\n      console.log('submitComment ÊñπÊ≥ïË¢´Ë∞ÉÁî®ÔºåÂ∏ñÂ≠êID:', p.id)\r\n      const pid = String(p.id)\r\n      const text = (this.inputMap[pid] || '').trim()\r\n      \r\n      if (!text) {\r\n        uni.showToast({ title: 'ËØ∑ËæìÂÖ•ËØÑËÆ∫ÂÜÖÂÆπ', icon: 'none' })\r\n        return\r\n      }\r\n      \r\n      // Á´ãÂç≥ÊòæÁ§∫ËØÑËÆ∫ÂèëÈÄÅ‰∏≠ÊèêÁ§∫\r\n      uni.showToast({ title: 'ËØÑËÆ∫ÂèëÈÄÅ‰∏≠...', icon: 'loading', duration: 2000 })\r\n      \r\n      // Ê£ÄÊü•Áî®Êà∑ÊòØÂê¶ÁôªÂΩï\r\n      const token = uni.getStorageSync('token')\r\n      if (!token) {\r\n        uni.showToast({ title: 'ËØ∑ÂÖàÁôªÂΩïÂêéÂÜçËØÑËÆ∫', icon: 'none' })\r\n        return\r\n      }\r\n      \r\n      // ‰ΩøÁî® uni.request Áõ¥Êé•Ë∞ÉÁî®ÂêéÁ´ØAPIÔºåÈÅøÂÖç console.log ÈóÆÈ¢ò\r\n      uni.request({\r\n        url: `http://172.20.10.3:9000/api/community/posts/${pid}/comments`,\r\n        method: 'POST',\r\n        header: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        data: {\r\n          content: text\r\n        },\r\n        success: (res) => {\r\n          console.log('APIË∞ÉÁî®ÊàêÂäüÔºåÂìçÂ∫î:', res)\r\n          \r\n          // ÊúçÂä°Âô®‰øùÂ≠òÊàêÂäüÔºå‰øùÂ≠òÂà∞Êú¨Âú∞\r\n          const one = { \r\n            name: 'Êàë', \r\n            text: text, \r\n            time: 'ÂàöÂàö',\r\n            userId: 'current',\r\n            avatar: uni.getStorageSync('userAvatar') || '/static/picture/profile.png'\r\n          }\r\n          \r\n          const cm = { ...(this.commentsMap || {}) }\r\n          const list = Array.isArray(cm[pid]) ? cm[pid].slice() : []\r\n          list.push(one)\r\n          cm[pid] = list\r\n          this.commentsMap = cm\r\n          uni.setStorageSync('social_comments', cm)\r\n          \r\n          // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü\r\n          this.$set(this.inputMap, pid, '')\r\n          \r\n          // Êõ¥Êñ∞ËØÑËÆ∫Êï∞ÈáèÊòæÁ§∫\r\n          this.$set(p, 'commentCount', (p.commentCount || 0) + 1)\r\n          \r\n          // ËØÑËÆ∫ÊàêÂäüÂêéÔºåËá™Âä®Êî∂Ëµ∑ËØÑËÆ∫Ê°Ü\r\n          this.$set(p, '_commenting', false)\r\n          this.$set(this.focusMap, pid, false)\r\n          \r\n          uni.showToast({ title: 'ËØÑËÆ∫ÊàêÂäü', icon: 'success' })\r\n        },\r\n        fail: (err) => {\r\n          console.log('APIË∞ÉÁî®Â§±Ë¥•ÔºåÈîôËØØ:', err)\r\n          // Â¶ÇÊûúAPIË∞ÉÁî®Â§±Ë¥•ÔºåÂè™ÊòæÁ§∫ÊèêÁ§∫Ôºå‰∏çÂÜçÊú¨Âú∞‰øùÂ≠òÔºàÈÅøÂÖçÈáçÂ§çÔºâ\r\n          uni.showToast({ title: 'ËØÑËÆ∫ÂèëÈÄÅÂ§±Ë¥•ÔºåËØ∑ÈáçËØï', icon: 'none' })\r\n        }\r\n      })\r\n    },\r\n    share(p) {\r\n      if (p) p._menuOpen = false\r\n      const link = `${this.baseUrl()}/#/pages/social/index?postId=${encodeURIComponent(p.id)}`\r\n      uni.setClipboardData({\r\n        data: link,\r\n        success: () => uni.showToast({ title: 'ÈìæÊé•Â∑≤Â§çÂà∂', icon: 'none' }),\r\n        fail: () => uni.showToast({ title: 'Â§çÂà∂Â§±Ë¥•', icon: 'none' })\r\n      })\r\n    },\r\n    baseUrl() {\r\n      try {\r\n        if (typeof location !== 'undefined' && location.origin) return location.origin\r\n      } catch(e) {}\r\n      return 'https://example.com'\r\n    },\r\n    \r\n    // ÊªöÂä®Âà∞ÊåáÂÆöÂ∏ñÂ≠ê\r\n    scrollToPost(postId) {\r\n      if (!postId) return;\r\n      \r\n      console.log('ÂºÄÂßãÊªöÂä®Âà∞Â∏ñÂ≠ê:', postId, 'ÂΩìÂâçÂ∏ñÂ≠êÂàóË°®:', this.posts);\r\n      \r\n      // Êü•ÊâæÂØπÂ∫îÂ∏ñÂ≠êÁöÑÁ¥¢Âºï\r\n      const targetIndex = this.posts.findIndex(post => {\r\n        const postIdStr = String(postId);\r\n        const currentPostIdStr = String(post.id);\r\n        console.log('ÊØîËæÉÂ∏ñÂ≠êID:', 'ÁõÆÊ†á:', postIdStr, 'ÂΩìÂâç:', currentPostIdStr, 'ÊòØÂê¶Áõ∏Á≠â:', postIdStr === currentPostIdStr);\r\n        return postIdStr === currentPostIdStr;\r\n      });\r\n      \r\n      if (targetIndex === -1) {\r\n        console.warn('Êú™ÊâæÂà∞Â∏ñÂ≠êID:', postId, 'ÂΩìÂâçÂ∏ñÂ≠êÂàóË°®ID:', this.posts.map(p => p.id));\r\n        uni.showToast({ title: 'Êú™ÊâæÂà∞ÂØπÂ∫îÁöÑÂ∏ñÂ≠ê', icon: 'none' });\r\n        return;\r\n      }\r\n      \r\n      console.log('ÊâæÂà∞Â∏ñÂ≠êÔºåÂáÜÂ§áÊªöÂä®:', postId, 'Á¥¢Âºï:', targetIndex);\r\n      \r\n      // ‰ΩøÁî®Êõ¥ÁÆÄÂçïÁöÑÊªöÂä®ÊñπÂºèÔºåÁõ¥Êé•ËÆ°ÁÆóÊªöÂä®‰ΩçÁΩÆ\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          // ËÆ°ÁÆóÊØè‰∏™Â∏ñÂ≠êÁöÑÈ´òÂ∫¶ÔºàÂåÖÊã¨ËæπË∑ùÔºâÔºåÂ§ßÁ∫¶‰∏∫ 400rpx\r\n          const postHeight = 400; // ÊØè‰∏™Â∏ñÂ≠êÁöÑÈ¢Ñ‰º∞È´òÂ∫¶ÔºàrpxÔºâ\r\n          const margin = 20; // Â∏ñÂ≠ê‰πãÈó¥ÁöÑËæπË∑ùÔºàrpxÔºâ\r\n          const scrollTop = (postHeight + margin) * targetIndex;\r\n          \r\n          uni.pageScrollTo({\r\n            scrollTop: scrollTop,\r\n            duration: 500\r\n          });\r\n          \r\n          console.log('Â∑≤ÊªöÂä®Âà∞‰ΩçÁΩÆ:', scrollTop);\r\n          \r\n          // Ê∑ªÂä†È´ò‰∫ÆÊïàÊûúÔºà‰ΩøÁî®uni-appÁöÑÊñπÂºèÔºâ\r\n          const targetPost = this.posts[targetIndex];\r\n          if (targetPost) {\r\n            // ‰∏¥Êó∂Ê∑ªÂä†È´ò‰∫ÆÊ†∑ÂºèÁ±ª\r\n            targetPost._highlighted = true;\r\n            \r\n            setTimeout(() => {\r\n              targetPost._highlighted = false;\r\n            }, 2000);\r\n          }\r\n        }, 300);\r\n      });\r\n    },\r\n    \r\n    // ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•Â§ÑÁêÜ\r\n    onImageError(e) {\r\n      console.warn('ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•:', e.detail)\r\n      \r\n      // Ëé∑ÂèñÂõæÁâáÂÖÉÁ¥†\r\n      const imageElement = e.target || e.currentTarget;\r\n      \r\n      // ËÆæÁΩÆÈªòËÆ§ÂõæÁâá\r\n      if (imageElement) {\r\n        // ‰ΩøÁî®Êú¨Âú∞ÈªòËÆ§ÂõæÁâá\r\n        imageElement.src = '/static/default-recipe-cover.jpg';\r\n      }\r\n      \r\n      // Â¶ÇÊûúÊòØ‰∏¥Êó∂Êñá‰ª∂Âä†ËΩΩÂ§±Ë¥•ÔºåÈùôÈªòÂ§ÑÁêÜÔºå‰∏çÊòæÁ§∫ÈîôËØØ\r\n      if (e.detail && e.detail.errMsg && e.detail.errMsg.includes('http://tmp/')) {\r\n        // ‰∏¥Êó∂Êñá‰ª∂Âä†ËΩΩÂ§±Ë¥•ÔºåÂ∑≤ÊõøÊç¢‰∏∫ÈªòËÆ§ÂõæÁâá\r\n      }\r\n      \r\n      // Â¶ÇÊûúÊòØÁ§∫‰æãÂõæÁâáÂä†ËΩΩÂ§±Ë¥•ÔºåÈùôÈªòÂ§ÑÁêÜ\r\n      if (e.detail && e.detail.errMsg && e.detail.errMsg.includes('example.com')) {\r\n        // Á§∫‰æãÂõæÁâáÂä†ËΩΩÂ§±Ë¥•ÔºåÂ∑≤ÊõøÊç¢‰∏∫ÈªòËÆ§ÂõæÁâá\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.page {\r\n  background: #f7f2e7;\r\n  position: relative;\r\n  min-height: 100vh;\r\n}\r\n\r\n/* È°∂ÈÉ®Ê†è */\r\n.header {\r\n  height: 88rpx;\r\n  padding: 0 24rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  background: #fff;\r\n}\r\n.title {\r\n  font-size: 36rpx;\r\n  font-weight: 700;\r\n  color: #1a1f36;\r\n}\r\n.add {\r\n  font-size: 40rpx;\r\n  color: #ff6a00;\r\n}\r\n\r\n/* ÂàóË°®‰∏éÂç°Áâá */\r\n.feed {\r\n  padding: 16rpx 24rpx 24rpx;\r\n}\r\n.post {\r\n  background: #fff;\r\n  border-radius: 24rpx;\r\n  padding: 20rpx;\r\n  margin-bottom: 20rpx;\r\n  box-shadow: 0 10rpx 24rpx rgba(0,0,0,0.06);\r\n  transition: box-shadow 0.3s ease;\r\n}\r\n.post.highlighted {\r\n  box-shadow: 0 0 20rpx rgba(255, 106, 0, 0.5);\r\n}\r\n.post { position: relative; }\r\n.post-top {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.avatar {\r\n  width: 64rpx;\r\n  height: 64rpx;\r\n  border-radius: 50%;\r\n  margin-right: 16rpx;\r\n}\r\n.author {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.name {\r\n  font-size: 28rpx;\r\n  color: #111827;\r\n  font-weight: 600;\r\n}\r\n.time {\r\n  font-size: 22rpx;\r\n  color: #9ca3af;\r\n}\r\n.more {\r\n  color: #9ca3af;\r\n  font-size: 36rpx;\r\n  padding: 0 8rpx;\r\n}\r\n.content {\r\n  margin-top: 16rpx;\r\n  font-size: 28rpx;\r\n  color: #1f2937;\r\n  line-height: 1.6;\r\n}\r\n\r\n.post-content {\r\n  display: block;\r\n  font-size: 30rpx;\r\n  color: #333;\r\n  line-height: 1.5;\r\n}\r\n\r\n/* ÂõæÁâáÊ†ÖÊ†º */\r\n.images {\r\n  margin-top: 16rpx;\r\n  display: grid;\r\n  grid-gap: 12rpx;\r\n}\r\n.images.cols-1 {\r\n  grid-template-columns: 1fr;\r\n}\r\n.images.cols-2 {\r\n  grid-template-columns: 1fr 1fr;\r\n}\r\n.images.cols-3 {\r\n  grid-template-columns: 1fr 1fr 1fr;\r\n}\r\n.img {\r\n  width: 100%;\r\n  height: 300rpx;\r\n  border-radius: 16rpx;\r\n  background: #eee;\r\n}\r\n\r\n/* ÈöêËóèÂ∫ïÈÉ®Êìç‰ΩúÊ†èÁöÑÊ†∑Âºè */\r\n.actions {\r\n  display: none;\r\n}\r\n.heart {\r\n  font-size: 28rpx;\r\n  color: #9ca3af;\r\n  transition: color 0.2s;\r\n  margin-right: 8rpx;\r\n}\r\n.heart.liked {\r\n  color: #ff4d4f;\r\n}\r\n\r\n/* ËØÑËÆ∫Âå∫ */\r\n.comments { margin-top: 12rpx; }\r\n.c-list { display: flex; flex-direction: column; gap: 6rpx; background: #fafafa; border-radius: 12rpx; padding: 10rpx; }\r\n.c-item { font-size: 24rpx; color: #374151; line-height: 1.4; }\r\n.c-name { color: #1f2937; font-weight: 600; margin-right: 6rpx; }\r\n.c-time { margin-left: 8rpx; color: #9ca3af; font-size: 22rpx; }\r\n.c-input { margin-top: 8rpx; display: flex; gap: 8rpx; align-items: center; }\r\n.c-input.compact { margin-top: 6rpx; }\r\n.input { flex: 1; height: 56rpx; background: #fff; border-radius: 10rpx; padding: 0 12rpx; font-size: 24rpx; box-shadow: 0 4rpx 10rpx rgba(0,0,0,0.06); }\r\n.input.compact { height: 52rpx; font-size: 24rpx; }\r\n.btn.micro { height: 52rpx; line-height: 52rpx; padding: 0 14rpx; border-radius: 10rpx; background: #f3f4f6; color: #374151; font-size: 24rpx; border: none; pointer-events: auto; position: relative; z-index: 1000; cursor: pointer; }\r\n\r\n/* ÊäòÂè†ËèúÂçïÔºàÁ±ª‰ººÊúãÂèãÂúàÔºâ */\r\n.actions-menu {\r\n  position: absolute;\r\n  right: 16rpx;\r\n  bottom: 120rpx;\r\n  background: #fff;\r\n  border-radius: 14rpx;\r\n  box-shadow: 0 12rpx 28rpx rgba(0,0,0,0.12);\r\n  overflow: hidden;\r\n  min-width: 200rpx;\r\n  z-index: 5;\r\n}\r\n.am-item {\r\n  padding: 14rpx 22rpx;\r\n  font-size: 26rpx;\r\n  color: #1f2937;\r\n}\r\n.am-item + .am-item { border-top: 1rpx solid #f0f2f5; }\r\n\r\n/* È°µÈù¢Á∫ßÈÅÆÁΩ©Ôºö‰ªª‰∏ÄËèúÂçïÂ±ïÂºÄÊó∂Âá∫Áé∞ÔºåÁÇπÂáªÂèØÂÖ≥Èó≠ÊâÄÊúâËèúÂçïÔºõ‰Ωé‰∫éËèúÂçïÁöÑ z-index */\r\n.page-mask {\r\n  position: fixed;\r\n  inset: 0;\r\n  z-index: 4; /* actions-menu ÊòØ 5 */\r\n  background: transparent;\r\n}\r\n\r\n/* ËèúÂçïÈÅÆÁΩ©ÔºöË¶ÜÁõñÊï¥Âº†Âç°ÁâáÔºåÁÇπÂáªÂèØÊî∂Ëµ∑ËèúÂçï */\r\n.menu-mask {\r\n  position: absolute;\r\n  inset: 0;\r\n  z-index: 4; /* ‰Ωé‰∫é actions-menu ÁöÑ z-index:5ÔºåÈ´ò‰∫éÂç°ÁâáÂÜÖÂÆπ */\r\n  background: transparent;\r\n}\r\n\r\n/* ÂõæÁâá‰∏ãÊñπ‰ø°ÊÅØË°åÔºöÂ∑¶Êó∂Èó¥„ÄÅÂè≥ÁúÅÁï•Âè∑ */\r\n.img-footer {\r\n  margin-top: 8rpx;\r\n  padding: 0 6rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n.time-badge {\r\n  background: transparent;\r\n  color: #9ca3af;\r\n  font-size: 24rpx;\r\n  padding: 0;\r\n}\r\n.menu-dot {\r\n  color: #9ca3af;\r\n  font-size: 32rpx;\r\n  padding: 4rpx 8rpx;\r\n  border-radius: 8rpx;\r\n}\r\n\r\n/* Âä†ËΩΩÁä∂ÊÄÅÊ†∑Âºè */\r\n.loading-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 100rpx 0;\r\n  background: #f7f2e7;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  border: 6rpx solid #ffd166;\r\n  border-left: 6rpx solid transparent;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 24rpx;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.loading-text {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n}\r\n\r\n/* Á©∫Áä∂ÊÄÅÊ†∑Âºè */\r\n.empty-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 120rpx 40rpx;\r\n  background: #f7f2e7;\r\n  text-align: center;\r\n}\r\n\r\n.empty-icon {\r\n  width: 160rpx;\r\n  height: 160rpx;\r\n  margin-bottom: 32rpx;\r\n  opacity: 0.7;\r\n}\r\n\r\n.empty-title {\r\n  font-size: 32rpx;\r\n  color: #666;\r\n  font-weight: 600;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.empty-desc {\r\n  font-size: 26rpx;\r\n  color: #999;\r\n  margin-bottom: 40rpx;\r\n  line-height: 1.5;\r\n}\r\n\r\n.empty-btn {\r\n  background: linear-gradient(135deg, #ff6a00 0%, #ff8c00 100%);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 50rpx;\r\n  padding: 20rpx 48rpx;\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n  box-shadow: 0 8rpx 24rpx rgba(255, 106, 0, 0.3);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.empty-btn:active {\r\n  transform: scale(0.95);\r\n  box-shadow: 0 4rpx 12rpx rgba(255, 106, 0, 0.3);\r\n}\r\n\r\n/* Âè≥‰∏äËßíÂç°ÈÄöÂõæÊ†∑ÂºèÔºàÁªü‰∏ÄÔºâ */\r\n</style>","import mod from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1762841640403\n      var cssReload = require(\"C:/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}