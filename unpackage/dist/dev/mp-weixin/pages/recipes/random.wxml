<view class="random-page"><block wx:if="{{$root.g0}}"><scroll-view class="selection-strip" scroll-x="{{true}}"><block wx:for="{{selection}}" wx:for-item="s" wx:for-index="i" wx:key="id"><view data-event-opts="{{[['tap',[['applySelection',[i]]]]]}}" class="{{['sel-item',i===currentIndex?'active':'']}}" bindtap="__e"><image class="sel-cover" src="{{s.cover||s.imageUrl||fallbackImg}}" mode="aspectFill"></image><text class="sel-name">{{s.name||'菜谱'}}</text></view></block></scroll-view></block><view data-event-opts="{{[['tap',[['openDetail',['$event']]]],['tap',[['openDetail',['$event']]]]]}}" class="hero" bindtap="__e"><image class="hero-img" src="{{recipe.imageUrl||fallbackImg}}" mode="aspectFill"></image><view class="hero-mask"></view><view class="hero-title"><text class="name">{{recipe.name||'随机菜谱'}}</text><view class="meta"><block wx:if="{{recipe.feature}}"><view class="tag tag-blue">{{recipe.feature}}</view></block></view></view></view><view data-event-opts="{{[['tap',[['openDetail',['$event']]]],['tap',[['openDetail',['$event']]]]]}}" class="card big-card" bindtap="__e"><view class="section"><view class="card-title">原料</view><view class="card-body section-body"><text class="para">{{recipe.ingredients||'—'}}</text></view></view><view class="section"><view class="card-title">调料</view><view class="card-body section-body"><text class="para">{{recipe.condiments||'—'}}</text></view></view><view class="section"><view class="card-title">做法</view><view class="card-body section-body"><block wx:if="{{$root.g1}}"><view class="steps"><block wx:for="{{steps}}" wx:for-item="s" wx:for-index="i" wx:key="i"><view class="step-item"><view class="step-index">{{i+1}}</view><text class="step-text">{{s}}</text></view></block></view></block><block wx:else><text class="para">{{recipe.method||'—'}}</text></block></view></view><view class="section"><view class="card-title">基本信息</view><view class="card-body info-list section-body"><view class="info-item"><text class="info-label">菜谱ID：</text><text class="info-value">{{recipe.id||'—'}}</text></view><view class="info-item"><text class="info-label">菜谱类型号：</text><text class="info-value">{{recipe.typeId||'—'}}</text></view><view class="info-item"><text class="info-label">特性：</text><text class="info-value">{{recipe.feature||'—'}}</text></view></view></view></view><view style="height:120rpx;"></view><view class="bottom-bar"><button data-event-opts="{{[['tap',[['prevSelection',['$event']]]]]}}" class="btn ghost" bindtap="__e">上一个</button><button data-event-opts="{{[['tap',[['nextSelection',['$event']]]]]}}" class="btn primary" bindtap="__e">下一个</button></view></view>