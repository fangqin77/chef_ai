<view class="detail-page"><view class="hero"><image class="hero-img" src="{{recipe.imageUrl||fallbackImg}}" mode="aspectFill"></image><view class="hero-mask"></view><view class="hero-title"><text class="name">{{recipe.name||'菜谱详情'}}</text></view><view data-event-opts="{{[['tap',[['toggleFavorite',['$event']]]]]}}" class="fav-btn" bindtap="__e"><text class="star">{{isFavorited?'★':'☆'}}</text></view></view><view class="card big-card"><view class="section"><view class="card-title">原料</view><view class="card-body section-body"><text class="para">{{recipe.ingredients||'—'}}</text></view></view><view class="section"><view class="card-title">调料</view><view class="card-body section-body"><text class="para">{{recipe.condiments||'—'}}</text></view></view><view class="section"><view class="card-title">做法</view><view class="card-body section-body"><block wx:if="{{$root.g0}}"><view class="steps"><block wx:for="{{steps}}" wx:for-item="s" wx:for-index="i" wx:key="i"><view class="step-item"><view class="step-index">{{i+1}}</view><text class="step-text">{{s}}</text></view></block></view></block><block wx:else><text class="para">{{recipe.method||'—'}}</text></block></view></view><view class="section"><view class="card-title">基本信息</view><view class="card-body info-list section-body"><view class="info-item"><text class="info-label">菜谱ID：</text><text class="info-value">{{recipe.id||'—'}}</text></view><view class="info-item"><text class="info-label">菜谱类型号：</text><text class="info-value">{{recipe.typeId||'—'}}</text></view><view class="info-item"><text class="info-label">特性：</text><text class="info-value">{{recipe.feature||'—'}}</text></view></view></view></view><view class="card timer-card"><view class="card-title">烹饪计时</view><view class="card-body"><view class="timer-row"><text class="time-left">{{timeLeft}}</text><view class="preset-group"><button data-event-opts="{{[['tap',[['selectPreset',[300]]]]]}}" class="{{['chip-btn',(timerPreset===300)?'active':'']}}" bindtap="__e">5分钟</button><button data-event-opts="{{[['tap',[['selectPreset',[600]]]]]}}" class="{{['chip-btn',(timerPreset===600)?'active':'']}}" bindtap="__e">10分钟</button><button data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="chip-btn" bindtap="__e">自定义</button></view><block wx:if="{{customPresetVisible}}"><view class="custom-row"><input class="custom-input" type="number" placeholder="分钟数" data-event-opts="{{[['input',[['__set_model',['','customPresetMinutes','$event',[]]]]]]}}" value="{{customPresetMinutes}}" bindinput="__e"/><button data-event-opts="{{[['tap',[['applyCustomPreset',['$event']]]]]}}" class="chip-btn set-btn" bindtap="__e">设定</button></view></block></view><view class="progress"><view class="bar" style="{{'width:'+(progressPct+'%')+';'+('background:'+(progressPct>0?'linear-gradient(90deg, #ff8a34 0%, #ff6a00 100%)':'transparent')+';')}}"></view></view><view class="timer-actions"><button data-event-opts="{{[['tap',[['resetTimer',['$event']]]]]}}" class="btn ghost small" bindtap="__e">重置</button><button data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="btn primary small" bindtap="__e">{{''+(timerRunning?'暂停':'开始')+''}}</button></view></view></view><view style="height:120rpx;"></view></view>