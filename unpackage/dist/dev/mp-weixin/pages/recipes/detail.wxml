<view class="detail-page"><view class="hero"><image class="hero-img" src="{{recipe.imageUrl||fallbackImg}}" mode="aspectFill"></image><view class="hero-mask"></view><view class="hero-title"><text class="name">{{recipe.name||'菜谱详情'}}</text><view class="meta"><block wx:if="{{recipe.typeId}}"><view class="tag tag-orange">{{"类型 "+recipe.typeId}}</view></block><block wx:if="{{recipe.id}}"><view class="tag tag-green">{{"ID "+recipe.id}}</view></block><block wx:if="{{recipe.feature}}"><view class="tag tag-blue">{{recipe.feature}}</view></block></view></view><view class="cloud"><view class="b1"></view><view class="b2"></view><view class="b3"></view><text class="cloud-text">开饭啦～</text></view></view><view class="card"><view class="card-title">原料</view><view class="card-body"><text class="para">{{recipe.ingredients||'—'}}</text></view></view><view class="card"><view class="card-title">调料</view><view class="card-body"><text class="para">{{recipe.condiments||'—'}}</text></view></view><view class="card"><view class="card-title">做法</view><view class="card-body"><block wx:if="{{$root.g0}}"><view class="steps"><block wx:for="{{steps}}" wx:for-item="s" wx:for-index="i" wx:key="i"><view class="step-item"><view class="step-index">{{i+1}}</view><text class="step-text">{{s}}</text></view></block></view></block><block wx:else><text class="para">{{recipe.method||'—'}}</text></block></view></view><view class="card timer-card"><view class="card-title">烹饪计时</view><view class="card-body"><view class="timer-row"><text class="time-left">{{timeLeft}}</text><view class="preset-group"><button data-event-opts="{{[['tap',[['selectPreset',[300]]]]]}}" class="{{['chip-btn',(timerPreset===300)?'active':'']}}" bindtap="__e">5分钟</button><button data-event-opts="{{[['tap',[['selectPreset',[600]]]]]}}" class="{{['chip-btn',(timerPreset===600)?'active':'']}}" bindtap="__e">10分钟</button><button data-event-opts="{{[['tap',[['selectPreset',[900]]]]]}}" class="{{['chip-btn',(timerPreset===900)?'active':'']}}" bindtap="__e">15分钟</button></view></view><view class="progress"><view class="bar" style="{{'width:'+(progressPct+'%')+';'}}"></view></view><view class="timer-actions"><button data-event-opts="{{[['tap',[['resetTimer',['$event']]]]]}}" class="btn ghost small" bindtap="__e">重置</button><button data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="btn primary small" bindtap="__e">{{''+(timerRunning?'暂停':'开始')+''}}</button></view></view></view><view style="height:120rpx;"></view><view class="bottom-bar"><button data-event-opts="{{[['tap',[['toggleFavorite',['$event']]]]]}}" class="btn ghost" bindtap="__e">{{isFavorited?'已收藏':'收藏'}}</button><button data-event-opts="{{[['tap',[['togglePlan',['$event']]]]]}}" class="btn ghost" bindtap="__e">{{isInPlan?'已加入计划':'加入计划'}}</button><button data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="btn primary" bindtap="__e">{{timerRunning?'暂停':'开始烹饪'}}</button></view></view>